(()=>{"use strict";var e={722:(e,t,n)=>{const r=new WebSocket("wss://localhost:3001/updates");function s(e){return{lang:(null==e?void 0:e.lang)??void 0,message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??void 0,abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??void 0}}function o(e){var t,n;const r=typeof e;return"string"===r?`"${e}"`:"number"===r||"bigint"===r||"boolean"===r?`${e}`:"object"===r||"function"===r?(e&&(null==(n=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:n.name))??"null":r}function i(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(null==s?void 0:s.expected)??e.expects??null,u=(null==s?void 0:s.received)??o(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:null==s?void 0:s.path,issues:null==s?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l="schema"===e.kind,p=(null==s?void 0:s.message)??e.message??(e.reference,void c.lang)??(l?void c.lang:null)??r.message??void c.lang;p&&(c.message="function"==typeof p?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function a(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},s())}}function u(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}n(575);var c=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function l(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function p(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function d(e){return{kind:"schema",type:"boolean",reference:d,expects:"boolean",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:i(this,"type",e,t),e}}}function f(e){return{kind:"schema",type:"function",reference:f,expects:"Function",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"function"==typeof e.value?e.typed=!0:i(this,"type",e,t),e}}}function h(e,t){return{kind:"schema",type:"loose_object",reference:h,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){var n;const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const s in this.entries){const o=this.entries[s];if(s in r||("exact_optional"===o.type||"optional"===o.type||"nullish"===o.type)&&void 0!==o.default){const i=s in r?r[s]:l(o),a=o["~run"]({value:i},t);if(a.issues){const o={type:"object",origin:"value",input:r,key:s,value:i};for(const t of a.issues)t.path?t.path.unshift(o):t.path=[o],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[s]=a.value}else if("exact_optional"!==o.type&&"optional"!==o.type&&"nullish"!==o.type&&(i(this,"key",e,t,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:r,key:s,value:r[s]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(const t in r)u(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else i(this,"type",e,t);return e}}}function y(e,t){return{kind:"schema",type:"nullish",reference:y,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return a(this)},"~run"(e,t){return null!==e.value&&void 0!==e.value||(void 0!==this.default&&(e.value=l(this,e,t)),null!==e.value&&void 0!==e.value)?this.wrapped["~run"](e,t):(e.typed=!0,e)}}}function b(e){return{kind:"schema",type:"number",reference:b,expects:"number",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?i(this,"type",e,t):e.typed=!0,e}}}function _(e,t){return{kind:"schema",type:"optional",reference:_,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return a(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=l(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function g(e){return{kind:"schema",type:"string",reference:g,expects:"string",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:i(this,"type",e,t),e}}}function v(){return{kind:"schema",type:"unknown",reference:v,expects:"unknown",async:!1,get"~standard"(){return a(this)},"~run":e=>(e.typed=!0,e)}}function m(e,t,n){const r=e["~run"]({value:t},s(n));if(r.issues)throw new c(r.issues);return r.value}function w(...e){return{...e[0],pipe:e,get"~standard"(){return a(this)},"~run"(t,n){for(const r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function k(e){return p(h({TelegramWebviewProxy:h({postEvent:f()})}),e)}var x=Object.defineProperty,E=(e,t,n)=>((e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function S(e){return t=>t instanceof e}function A(e,t){t||(t=[]);class n extends Error{constructor(...n){super(..."function"==typeof t?t(...n):"string"==typeof t?[t]:t||[]),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,S(n)]}const[$,j]=A("CancelledError","Promise was canceled"),[q,C]=A("TimeoutError",((e,t)=>[`Timeout reached: ${e}ms`,{cause:t}])),P=Symbol("Resolved");function T(e){return Array.isArray(e)&&e[0]===P}function I(e,t){return e.reject=t.reject,e.abort=t.abort,e}let O=class e extends Promise{constructor(e,t){let n,r;super(((s,o)=>{let i,a;"function"==typeof e?(i=e,a=t):a=e;const u=[],c=e=>(...t)=>{const n=e(...t);return u.forEach((e=>e())),n},l=new AbortController,{signal:p}=l;r=e=>{!p.aborted&&l.abort(e)};const d=()=>p.reason,f=e=>{const t=()=>{e(d())};p.addEventListener("abort",t,!0);const n=()=>{p.removeEventListener("abort",t,!0)};return u.push(n),n},h=c((e=>{s(e),r([P,e])}));n=c((e=>{o(e),r(e)})),a||(a={});const{abortSignal:y,rejectOnAbort:b=!0}=a;if(y)if(y.aborted){const{reason:e}=y;if(b)return n(e);r(e)}else{const e=()=>{r(y.reason)};y.addEventListener("abort",e),u.push((()=>{y.removeEventListener("abort",e)}))}b&&f(o);const{timeout:_}=a;if(_){const e=setTimeout((()=>{r(new q(_))}),_);u.push((()=>{clearTimeout(e)}))}const g=()=>p.aborted,v=()=>T(d()),m=()=>{const e=d();return T(e)?e[1]:void 0};try{const e=i&&i(h,n,{abortReason:d,abortSignal:p,isAborted:g,isResolved:v,onAborted:f,onResolved:e=>f((()=>{v()&&e(m())})),resolved:m,throwIfAborted(){if(g())throw d()}});e instanceof Promise&&e.catch(n)}catch(e){n(e)}})),E(this,"abort"),E(this,"reject"),this.abort=r,this.reject=n}static fn(t,n){return new e((async(e,n,r)=>{try{e(await t(r))}catch(e){n(e)}}),n)}static resolve(e){return this.fn((()=>e))}static reject(t){return new e(((e,n)=>{n(t)}))}cancel(){this.abort(new $)}catch(e){return this.then(void 0,e)}finally(e){return I(super.finally(e),this)}then(e,t){return I(super.then(e,t),this)}};function L(e){const t=function(e){return Object.entries(e).reduce(((e,[t,n])=>(e[function(e){return e.replace(/_[a-z]/g,(e=>e[1].toUpperCase()))}(t)]=n,e)),{})}(e);for(const e in t){const n=t[e];n&&"object"==typeof n&&!(n instanceof Date)&&(t[e]=Array.isArray(n)?n.map(L):L(n))}return t}function R(e){return`tapps/${e}`}function D(e,t){sessionStorage.setItem(R(e),JSON.stringify(t))}function N(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:s}=t,o=void 0===s||s,i="boolean"==typeof o?()=>o:o;function a(t,s,...o){if(s||i()){const s="font-weight:bold;padding:0 5px;border-radius:5px";console[t](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${s};background-color: lightblue;color:black`,"",`${s};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...o)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function M(e){return{lang:(null==e?void 0:e.lang)??void 0,message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??void 0,abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??void 0}}function B(e){var t,n;const r=typeof e;return"string"===r?`"${e}"`:"number"===r||"bigint"===r||"boolean"===r?`${e}`:"object"===r||"function"===r?(e&&(null==(n=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:n.name))??"null":r}function V(e,t,n,r,s){const o=s&&"input"in s?s.input:n.value,i=(null==s?void 0:s.expected)??e.expects??null,a=(null==s?void 0:s.received)??B(o),u={kind:e.kind,type:e.type,input:o,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:null==s?void 0:s.path,issues:null==s?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c="schema"===e.kind,l=(null==s?void 0:s.message)??e.message??(e.reference,void u.lang)??(c?void u.lang:null)??r.message??void u.lang;l&&(u.message="function"==typeof l?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function W(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},M())}}function U(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function F(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var z=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function G(e,t){return{kind:"validation",type:"check",reference:G,async:!1,expects:null,requirement:e,message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&V(this,"input",e,t),e}}}function H(e){return{kind:"validation",type:"integer",reference:H,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&V(this,"integer",e,t),e}}}function J(e){return{kind:"transformation",type:"transform",reference:J,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function K(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function Z(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Y(e){return{kind:"schema",type:"boolean",reference:Y,expects:"boolean",async:!1,message:e,get"~standard"(){return W(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:V(this,"type",e,t),e}}}function Q(e){return{kind:"schema",type:"date",reference:Q,expects:"Date",async:!1,message:e,get"~standard"(){return W(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?V(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:V(this,"type",e,t),e}}}function X(e,t){return{kind:"schema",type:"instance",reference:X,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return W(this)},"~run"(e,t){return e.value instanceof this.class?e.typed=!0:V(this,"type",e,t),e}}}function ee(e){return{kind:"schema",type:"lazy",reference:ee,expects:"unknown",async:!1,getter:e,get"~standard"(){return W(this)},"~run"(e,t){return this.getter(e.value)["~run"](e,t)}}}function te(e,t){return{kind:"schema",type:"loose_object",reference:te,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return W(this)},"~run"(e,t){var n;const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const s in this.entries){const o=this.entries[s];if(s in r||("exact_optional"===o.type||"optional"===o.type||"nullish"===o.type)&&void 0!==o.default){const i=s in r?r[s]:K(o),a=o["~run"]({value:i},t);if(a.issues){const o={type:"object",origin:"value",input:r,key:s,value:i};for(const t of a.issues)t.path?t.path.unshift(o):t.path=[o],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[s]=a.value}else if("exact_optional"!==o.type&&"optional"!==o.type&&"nullish"!==o.type&&(V(this,"key",e,t,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:r,key:s,value:r[s]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(const t in r)U(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else V(this,"type",e,t);return e}}}function ne(e){return{kind:"schema",type:"number",reference:ne,expects:"number",async:!1,message:e,get"~standard"(){return W(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?V(this,"type",e,t):e.typed=!0,e}}}function re(e,t){return{kind:"schema",type:"optional",reference:re,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return W(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=K(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function se(e,t,n){return{kind:"schema",type:"record",reference:se,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return W(this)},"~run"(e,t){var n,r;const s=e.value;if(s&&"object"==typeof s){e.typed=!0,e.value={};for(const o in s)if(U(s,o)){const i=s[o],a=this.key["~run"]({value:o},t);if(a.issues){const r={type:"object",origin:"key",input:s,key:o,value:i};for(const t of a.issues)t.path=[r],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}const u=this.value["~run"]({value:i},t);if(u.issues){const n={type:"object",origin:"value",input:s,key:o,value:i};for(const t of u.issues)t.path?t.path.unshift(n):t.path=[n],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=u.issues),t.abortEarly){e.typed=!1;break}}(!a.typed||!u.typed)&&(e.typed=!1),a.typed&&(e.value[a.value]=u.value)}}else V(this,"type",e,t);return e}}}function oe(e){return{kind:"schema",type:"string",reference:oe,expects:"string",async:!1,message:e,get"~standard"(){return W(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:V(this,"type",e,t),e}}}function ie(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function ae(e,t){return{kind:"schema",type:"union",reference:ae,expects:F(e.map((e=>e.expects)),"|"),async:!1,options:e,message:t,get"~standard"(){return W(this)},"~run"(e,t){let n,r,s;for(const o of this.options){const i=o["~run"]({value:e.value},t);if(i.typed){if(!i.issues){n=i;break}r?r.push(i):r=[i]}else s?s.push(i):s=[i]}if(n)return n;if(r){if(1===r.length)return r[0];V(this,"type",e,t,{issues:ie(r)}),e.typed=!0}else{if(1===(null==s?void 0:s.length))return s[0];V(this,"type",e,t,{issues:ie(s)})}return e}}}function ue(){return{kind:"schema",type:"unknown",reference:ue,expects:"unknown",async:!1,get"~standard"(){return W(this)},"~run":e=>(e.typed=!0,e)}}function ce(e,t,n){const r=e["~run"]({value:t},M(n));if(r.issues)throw new z(r.issues);return r.value}function le(...e){return{...e[0],pipe:e,get"~standard"(){return W(this)},"~run"(t,n){for(const r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function pe(e){const t=function(e){return Object.entries(e).reduce(((e,[t,n])=>(e[function(e){return e.replace(/_[a-z]/g,(e=>e[1].toUpperCase()))}(t)]=n,e)),{})}(e);for(const e in t){const n=t[e];n&&"object"==typeof n&&!(n instanceof Date)&&(t[e]=Array.isArray(n)?n.map(pe):pe(n))}return t}function de(e){return J((t=>e?pe(t):t))}function fe(e){return t=>le(e,de(t))}function he(){return J(JSON.parse)}function ye(e){const t=fe(e);return e=>le(oe(),he(),t(e))}function be(e){return t=>le(ae([oe(),X(URLSearchParams)]),function(e){return J((t=>{const n={};return new URLSearchParams(t).forEach(((e,t)=>{const r=n[t];Array.isArray(r)?r.push(e):n[t]=void 0===r?e:[r,e]})),ce(e,n)}))}(e),de(t))}const _e=re(ee((()=>ke()))),ge=te({id:ne(),photo_url:re(oe()),type:oe(),title:oe(),username:re(oe())}),ve=te({added_to_attachment_menu:re(Y()),allows_write_to_pm:re(Y()),first_name:oe(),id:ne(),is_bot:re(Y()),is_premium:re(Y()),last_name:re(oe()),language_code:re(oe()),photo_url:re(oe()),username:re(oe())}),me=te({auth_date:le(oe(),J((e=>new Date(1e3*Number(e)))),Q()),can_send_after:re(le(oe(),J(Number),H())),chat:re(ee((()=>we()))),chat_type:re(oe()),chat_instance:re(oe()),hash:oe(),query_id:re(oe()),receiver:_e,start_param:re(oe()),signature:oe(),user:_e}),we=ye(ge),ke=ye(ve),xe=be(me);function Ee(e){return/^#[\da-f]{6}$/i.test(e)}const Se=fe(se(oe(),le(ae([oe(),ne()]),J((e=>"number"==typeof e?`#${(16777215&e).toString(16).padStart(6,"0")}`:e)),G(Ee)))),Ae=re(le(oe(),J((e=>"1"===e)))),$e=ye(Se()),je=be(te({tgWebAppBotInline:Ae,tgWebAppData:re(xe()),tgWebAppDefaultColors:re($e()),tgWebAppFullscreen:Ae,tgWebAppPlatform:oe(),tgWebAppShowSettings:Ae,tgWebAppStartParam:re(oe()),tgWebAppThemeParams:$e(),tgWebAppVersion:oe()})),qe=(Pe=je(),(e,t)=>ce(le(Pe,de(t)),e)),Ce=te({eventType:oe(),eventData:re(ue())});var Pe;function Te(e){try{return Z(je(),e)}catch{return!1}}function Ie(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}const[Oe,Le]=N("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:()=>false}),Re={clipboard_text_received:h({req_id:g(),data:y(g())}),custom_method_invoked:h({req_id:g(),result:_(v()),error:_(g())}),popup_closed:y(h({button_id:y(g(),(()=>{}))}),{}),viewport_changed:h({height:b(),width:y(b(),(()=>window.innerWidth)),is_state_stable:d(),is_expanded:d()}),theme_changed:h({theme_params:Se()})};function De(e){if(e.source!==window.parent)return;let t;try{t=m(w(g(),he(),Ce),e.data)}catch{return}const{eventType:n,eventData:r}=t,s=Re[n];try{const e=s?m(s,r):r;Be(n,e)}catch(e){Le(!0,[`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join("\n"),t,e)}}const[Ne,Me,Be,Ve]=function(e,t){const n=function(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}(),r=new Map,s=(e,s,o)=>{o||(o=!1);const i=r.get(e)||new Map;r.set(e,i);const a=i.get(s)||[];i.set(s,a);const u=a.findIndex((e=>e[1]===o));u>=0&&(n.off(e,a[u][0]),a.splice(u,1),!a.length&&i.delete(s),i.size||(r.delete(e),!r.size&&t()))};return[function(e,t,o){function i(){s(e,t,o)}function a(...n){o&&i(),"*"===e?t(n):t(...n)}!r.size&&(()=>{const e=window,t={receiveEvent:Ie};e.TelegramGameProxy_receiveEvent=Ie,e.TelegramGameProxy=t,e.Telegram={WebView:t},window.addEventListener("message",De)})(),n.on(e,a);const u=r.get(e)||new Map;r.set(e,u);const c=u.get(t)||[];return u.set(t,c),c.push([a,o||!1]),i},s,n.emit,function(){const e=n.all.size;n.all.clear(),r.clear(),e&&t()}]}(0,(()=>{["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach((e=>{delete window[e]})),window.removeEventListener("message",De)}));function We(e){return t=>t instanceof e}function Ue(e,t){t||(t=[]);class n extends Error{constructor(...n){super(..."function"==typeof t?t(...n):"string"==typeof t?[t]:t||[]),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,We(n)]}const[Fe,ze]=Ue("MethodUnsupportedError",((e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`])),[Ge,He]=Ue("MethodParameterUnsupportedError",((e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`])),Je=["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment"].join("\n"),[Ke,Ze]=Ue("LaunchParamsRetrieveError",Je),[Ye,Qe]=Ue("InvalidLaunchParamsError",(e=>[`Invalid value for launch params: ${e}`])),[Xe,et]=Ue("UnknownEnvError"),[tt,nt]=Ue("InvokeCustomMethodError",(e=>[`Server returned error: ${e}`]));function rt(e,t){t||(t={});const n=t.equals||Object.is;let r=[],s=e;const o=e=>{if(!n(s,e)){const t=s;s=e,[...r].forEach((([n,r])=>{n(e,t),r&&a(n,!0)}))}};function i(e){const t="object"!=typeof e?{once:e}:e;return{once:t.once||!1,signal:t.signal||!1}}const a=(e,t)=>{const n=i(t),s=r.findIndex((([t,r])=>t===e&&r.once===n.once&&r.signal===n.signal));s>=0&&r.splice(s,1)},u=Object.assign((function(){return function(e){st.length&&st[st.length-1].add(e)}(u),s}),{destroy(){r=[]},set:o,reset(){o(e)},sub:(e,t)=>(r.push([e,i(t)]),()=>a(e,t)),unsub:a,unsubAll(){r=r.filter((e=>e[1].signal))}});return u}const st=[],ot=rt("https://web.telegram.org");function it(e,t){Oe(!1,"Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});if(function(){try{return window.self!==window.top}catch{return!0}}())return n.parent.postMessage(r,ot());if(k(n))n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else{if(!p(h({external:h({notify:f()})}),n))throw new Xe;n.external.notify(r)}}function at(e,t,n){n||(n={});const{capture:r}=n,[s,o]=function(){const e=[].flat(1);return[e.push.bind(e),()=>{e.forEach((e=>{e()}))}]}();return new O((o=>{(Array.isArray(t)?t:[t]).forEach((e=>{s(Ne(e,(n=>{(!r||(Array.isArray(t)?r({event:e,payload:n}):r(n)))&&o(n)})))})),(n.postEvent||it)(e,n.params)}),n).finally(o)}const ut="launchParams";function ct(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function lt(e){const t=qe(function(){for(const e of[()=>ct(window.location.href),()=>{const e=performance.getEntriesByType("navigation")[0];return e&&ct(e.name)},()=>function(e){const t=sessionStorage.getItem(R(e));try{return t?JSON.parse(t):void 0}catch{}}(ut)]){const t=e();if(t&&Te(t))return D(ut,t),t}throw new Ke}());return e?L(t):t}function pt(e,t){if(!e)try{return lt(),!0}catch{return!1}return O.fn((async e=>{if(k(window))return!0;try{return await at("web_app_request_theme","theme_changed",e),!0}catch{return!1}}),t||{timeout:100})}function dt(e){return({req_id:t})=>t===e}function ft(e){return e.split(".").map(Number)}function ht(e,t){return function(e,t){const n=ft(e),r=ft(t),s=Math.max(n.length,r.length);for(let e=0;e<s;e+=1){const t=n[e]||0,s=r[e]||0;if(t!==s)return t>s?1:-1}return 0}(e,t)<=0}function yt(e,t,n){if("string"==typeof n){if("web_app_open_link"===e){if("try_instant_view"===t)return ht("6.4",n);if("try_browser"===t)return ht("7.6",n)}if("web_app_set_header_color"===e&&"color"===t)return ht("6.9",n);if("web_app_close"===e&&"return_back"===t)return ht("7.6",n);if("web_app_setup_main_button"===e&&"has_shine_effect"===t)return ht("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return ht("6.1",t);case"web_app_open_popup":return ht("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return ht("6.4",t);case"web_app_switch_inline_query":return ht("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return ht("6.9",t);case"web_app_setup_settings_button":return ht("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return ht("7.2",t);case"web_app_setup_swipe_behavior":return ht("7.7",t);case"web_app_share_to_story":return ht("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return ht("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return ht("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function bt(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}function _t(e){return`tapps/${e}`}function gt(e,t){sessionStorage.setItem(_t(e),JSON.stringify(t))}function vt(e){const t=sessionStorage.getItem(_t(e));try{return t?JSON.parse(t):void 0}catch{}}function mt(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach((e=>{e()}))}]}function wt(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:s}=t,o=void 0===s||s,i="boolean"==typeof o?()=>o:o;function a(t,s,...o){if(s||i()){const s="font-weight:bold;padding:0 5px;border-radius:5px";console[t](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${s};background-color: lightblue;color:black`,"",`${s};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...o)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function kt(){const e=performance.getEntriesByType("navigation")[0];return!!e&&"reload"===e.type}let xt;function Et(e){if(xt)return e();xt=new Map;try{e()}finally{xt.forEach((e=>e())),xt=void 0}}function St(e,t){t||(t={});const n=t.equals||Object.is;let r=[],s=e;const o=e=>{if(!n(s,e)){const t=s;s=e,function(e,t){xt&&xt.set(e,t)||t()}(u,(()=>{[...r].forEach((([n,r])=>{n(e,t),r&&a(n,!0)}))}))}};function i(e){const t="object"!=typeof e?{once:e}:e;return{once:t.once||!1,signal:t.signal||!1}}const a=(e,t)=>{const n=i(t),s=r.findIndex((([t,r])=>t===e&&r.once===n.once&&r.signal===n.signal));s>=0&&r.splice(s,1)},u=Object.assign((function(){return function(e){At.length&&At[At.length-1].add(e)}(u),s}),{destroy(){r=[]},set:o,reset(){o(e)},sub:(e,t)=>(r.push([e,i(t)]),()=>a(e,t)),unsub:a,unsubAll(){r=r.filter((e=>e[1].signal))}});return u}const At=[];function $t(e,t){let n,r=new Set;function s(){return n||(n=St(i(),t))}function o(){s().set(i())}function i(){r.forEach((e=>{e.unsub(o,{signal:!0})}));const t=new Set;let n;At.push(t);try{n=e()}finally{At.pop()}return t.forEach((e=>{e.sub(o,{signal:!0})})),r=t,n}return Object.assign((function(){return s()()}),{destroy(){s().destroy()},sub:(...e)=>s().sub(...e),unsub(...e){s().unsub(...e)},unsubAll(...e){s().unsubAll(...e)}})}function jt(e,t){return St(e,t)}function qt(e,t){return $t(e,t)}function Ct(e,t){const n=jt(e,t);return[n,qt(n)]}const[Pt,Tt]=wt("SDK",{bgColor:"forestgreen",textColor:"white",shouldLog:()=>false}),It=jt(0),Ot=jt(it),[Lt,Rt]=Ct({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),Dt=qt((()=>Rt().tgWebAppVersion));function Nt(e,t,n){return function(e,t,n,r){return at("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:e,params:t,req_id:n},capture:dt(n)}).then((({result:e,error:t})=>{if(t)throw new tt(t);return e}))}(e,t,(It.set(It()+1),It().toString()),{...n||{},postEvent:Bt})}const Mt=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=Bt),at(e,t,n)),Bt=(e,t)=>Ot()(e,t);function Vt(e){return qt((()=>yt(e,Dt())))}function Wt(e){return t=>t instanceof e}function Ut(e,t){t||(t=[]);class n extends Error{constructor(...n){super(..."function"==typeof t?t(...n):"string"==typeof t?[t]:t||[]),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Wt(n)]}function Ft(e){return[e]}const[zt,Gt]=Ut("CSSVarsBoundError","CSS variables are already bound"),[Ht,Jt]=Ut("NotAvailableError",Ft),[Kt,Zt]=Ut("InvalidEnvError",Ft),[Yt,Qt]=Ut("FunctionNotAvailableError",Ft),[Xt,en]=Ut("InvalidArgumentsError",((e,t)=>[e,{cause:t}])),[tn,nn]=Ut("ConcurrentCallError",Ft),[rn,sn]=Ut("SetEmojiStatusError",(e=>[`Failed to set emoji status: ${e}`])),[on,an]=Ut("AccessDeniedError",Ft),[un,cn]=Ut("FullscreenFailedError",Ft),[ln,pn]=Ut("ShareMessageError",Ft);function dn(){return typeof window>"u"}function fn(e,t,n){n||(n={});const{isSupported:r,isMounted:s,isMounting:o,component:i,supports:a}=n||{},u=`${i?`${i}.`:""}${e}()`,c=r?Array.isArray(r)||"object"==typeof r&&"any"in r?r:[r]:void 0;function l(e){if(a){const t=a[e];return yt(t[0],t[1],Dt())}return!0}function p(){if(!c)return;const e=Array.isArray(c)?c:c.any,t=e.map((function(e){return"function"==typeof e?e():yt(e,Dt())?void 0:`it is unsupported in Mini Apps version ${Dt()}`})).filter(Boolean);return Array.isArray(c)?t[0]:t.length===e.length?t[t.length-1]:void 0}let d;if(a){d={};for(const e in a)d[e]=qt((()=>l(e)))}const f=qt((()=>!p())),h=qt((()=>"0.0"!==Dt())),y=qt((()=>!s||s())),b=qt((()=>pt()&&!dn()&&h()&&f()&&y()));return Object.assign(((...e)=>{const n=`Unable to call the ${u} ${i?"method":"function"}:`;if(dn()||!pt())throw new Yt(`${n} it can't be called outside Mini Apps`);if(!h())throw new Yt(`${n} the SDK was not initialized. Use the SDK init() function`);const r=p();if(r)throw new Yt(`${n} ${r}`);const s=function(...e){for(const t in a)if(a[t][2](...e)&&!l(t))return`option ${t} is not supported in Mini Apps version ${Dt()}`}(...e);if(s)throw new Yt(`${n} ${s}`);if(!y()){const e=o&&o()?"mounting. Wait for the mount completion":`unmounted. Use the ${i}.mount() method`;throw new Yt(`${n} the component is ${e}`)}return t(...e)}),t,{isAvailable:b,ifAvailable:(...e)=>b()?[!0,t(...e)]:[!1]},c?{isSupported:f}:{},d?{supports:d}:{})}function hn(e,t){return t||(t={}),(n,r,s,o)=>fn(n,r,{...t,isSupported:s||t.isSupported,supports:o,component:e})}function yn(e,t,n){return hn(e,{isSupported:n,isMounted:t})}function bn(e,t){return hn(e,{isSupported:t})}const _n="web_app_setup_back_button",gn="back_button_pressed",vn="backButton",[mn,wn]=Ct(!1),[kn,xn]=Ct(!1),En=(Vt(_n),yn(vn,kn,_n)),Sn=bn(vn,_n);En("hide",(()=>{An(!1)})),Sn("mount",(()=>{kn()||(An(kt()&&vt(vn)||!1),kn.set(!0))}));function An(e){e!==mn()&&(Bt(_n,{is_visible:e}),gt(vn,e),mn.set(e))}Sn("onClick",(e=>Ne(gn,e))),Sn("offClick",(e=>{Me(gn,e)})),En("show",(()=>{An(!0)}));Symbol.toStringTag;var $n=Object.defineProperty,jn=(e,t,n)=>((e,t,n)=>t in e?$n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function qn(e){return t=>t instanceof e}function Cn(e,t){t||(t=[]);class n extends Error{constructor(...n){super(..."function"==typeof t?t(...n):"string"==typeof t?[t]:t||[]),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,qn(n)]}const[Pn,Tn]=Cn("CancelledError","Promise was canceled"),[In,On]=Cn("TimeoutError",((e,t)=>[`Timeout reached: ${e}ms`,{cause:t}])),Ln=Symbol("Resolved");function Rn(e){return Array.isArray(e)&&e[0]===Ln}function Dn(e,t){return e.reject=t.reject,e.abort=t.abort,e}let Nn=class e extends Promise{constructor(e,t){let n,r;super(((s,o)=>{let i,a;"function"==typeof e?(i=e,a=t):a=e;const u=[],c=e=>(...t)=>{const n=e(...t);return u.forEach((e=>e())),n},l=new AbortController,{signal:p}=l;r=e=>{!p.aborted&&l.abort(e)};const d=()=>p.reason,f=e=>{const t=()=>{e(d())};p.addEventListener("abort",t,!0);const n=()=>{p.removeEventListener("abort",t,!0)};return u.push(n),n},h=c((e=>{s(e),r(function(e){return[Ln,e]}(e))}));n=c((e=>{o(e),r(e)})),a||(a={});const{abortSignal:y,rejectOnAbort:b=!0}=a;if(y)if(y.aborted){const{reason:e}=y;if(b)return n(e);r(e)}else{const e=()=>{r(y.reason)};y.addEventListener("abort",e),u.push((()=>{y.removeEventListener("abort",e)}))}b&&f(o);const{timeout:_}=a;if(_){const e=setTimeout((()=>{r(new In(_))}),_);u.push((()=>{clearTimeout(e)}))}const g=()=>p.aborted,v=()=>Rn(d()),m=()=>{const e=d();return Rn(e)?e[1]:void 0};try{const e=i&&i(h,n,{abortReason:d,abortSignal:p,isAborted:g,isResolved:v,onAborted:f,onResolved:e=>f((()=>{v()&&e(m())})),resolved:m,throwIfAborted(){if(g())throw d()}});e instanceof Promise&&e.catch(n)}catch(e){n(e)}})),jn(this,"abort"),jn(this,"reject"),this.abort=r,this.reject=n}static fn(t,n){return new e((async(e,n,r)=>{try{e(await t(r))}catch(e){n(e)}}),n)}static resolve(e){return this.fn((()=>e))}static reject(t){return new e(((e,n)=>{n(t)}))}cancel(){this.abort(new Pn)}catch(e){return this.then(void 0,e)}finally(e){return Dn(super.finally(e),this)}then(e,t){return Dn(super.then(e,t),this)}};function Mn(e,t){return e.resolve=t.resolve,e}let Bn=class e extends Nn{constructor(e,t){let n,r,s;"function"==typeof e?(n=e,r=t):r=e,super(((e,t,r)=>{s=e,n&&n(e,t,r)}),r),jn(this,"resolve"),this.resolve=s}static fn(t,n){return new e(((e,n,r)=>{try{Promise.resolve(t(r)).then(e,n)}catch(e){n(e)}}),n)}static resolve(e){return this.fn((()=>e))}static reject(t){return new e(((e,n)=>{n(t)}))}catch(e){return this.then(void 0,e)}finally(e){return Mn(super.finally(e),this)}then(e,t){return Mn(super.then(e,t),this)}};function Vn(e,t,n){n||(n={});const{promise:r,error:s}=n,[o,i]=r?[r,qt(r)]:Ct(),[a,u]=s?[s,qt(s)]:Ct();return[Object.assign(((...n)=>{if(o()){const e=new tn(t);return a.set(e),Nn.reject(e)}let r;return Et((()=>{o.set(e(...n)),a.set(void 0)})),o().catch((e=>{throw r=e,e})).finally((()=>{Et((()=>{o.set(void 0),a.set(r)}))}))}),e),[o,i,qt((()=>!!o()))],[a,u]]}function Wn(e,t,n){const[r,...s]=Vn(t,`The ${e} component is already mounting`),[o,i]=Ct(!1);return[(...e)=>o()?Nn.resolve():r(...e).then((e=>{Et((()=>{o.set(!0),n(e)}))})),...s,[o,i]]}const[Un,Fn]=Ct({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),zn="web_app_biometry_get_info",Gn=fn("requestBiometry",(e=>Mt(zn,"biometry_info_received",e)),{isSupported:zn});function Hn(e){if(!Tn(e))throw e}const Jn="biometry",Kn="web_app_biometry_request_auth",Zn="biometry_info_received",Yn=e=>{xr(Xn(e))};function Qn(){throw new Ht("Biometry is not available")}function Xn(e){let t=!1,n=!1,r="",s=!1,o="",i=!1;return e.available&&(t=!0,n=e.token_saved,r=e.device_id,s=e.access_requested,o=e.type,i=e.access_granted),{available:t,tokenSaved:n,deviceId:r,type:o,accessGranted:i,accessRequested:s}}Vt(Kn);const[er,tr,nr,rr]=Wn(Jn,(e=>{const t=kt()&&vt(Jn);return t?Nn.resolve(t):Gn({abortSignal:e}).then(Xn)}),(e=>{Ne(Zn,Yn),xr(e)})),sr=bn(Jn,Kn),or=yn(Jn,rr[0],Kn),[,ir,ar]=(sr("mount",er),tr),[,ur]=nr,[cr,lr]=rr,[pr,dr,fr]=Vn((e=>Nn.fn((async t=>{const n=Un();n.available||Qn();const r=await Mt(Kn,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:s}=r;return"string"==typeof s&&xr({...n,token:s}),r}),e)),"Biometry authentication is already in progress"),[,hr,yr]=(or("authenticate",pr),dr),[,br]=fr,[_r,gr,vr]=(sr("openSettings",(()=>{Bt("web_app_biometry_open_settings")})),Vn((e=>Nn.fn((async t=>{const n=await Mt("web_app_biometry_request_access",Zn,{...e,...t,params:{reason:(e||{}).reason||""}}).then(Xn);return n.available||Qn(),xr(n),n.accessGranted}),e)),"Biometry access request is already in progress")),[,mr,wr]=(or("requestAccess",_r),gr),[,kr]=vr;function xr(e){Un.set(e),gt(Jn,e)}or("updateToken",(e=>(e||(e={}),Mt("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then((e=>e.status)))));function Er(e,t){return hn(e,{isMounted:t})}Symbol.toStringTag;const Sr=hn,Ar="closingBehavior",[$r,jr]=Ct(!1),[qr,Cr]=Ct(!1),Pr=Er(Ar,Cr),Tr=Sr(Ar);Pr("disableConfirmation",(()=>{Ir(!1)})),Pr("enableConfirmation",(()=>{Ir(!0)})),Tr("mount",(()=>{qr()||(Ir(kt()&&vt(Ar)||!1),qr.set(!0))}));function Ir(e){e!==$r()&&(Bt("web_app_setup_closing_behavior",{need_confirmation:e}),gt(Ar,e),$r.set(e))}function Or(e){return{lang:(null==e?void 0:e.lang)??void 0,message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??void 0,abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??void 0}}function Lr(e,t){return null==void 0?void 0:undefined.get(t)}function Rr(e){var t,n;const r=typeof e;return"string"===r?`"${e}"`:"number"===r||"bigint"===r||"boolean"===r?`${e}`:"object"===r||"function"===r?(e&&(null==(n=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:n.name))??"null":r}function Dr(e,t,n,r,s){const o=s&&"input"in s?s.input:n.value,i=(null==s?void 0:s.expected)??e.expects??null,a=(null==s?void 0:s.received)??Rr(o),u={kind:e.kind,type:e.type,input:o,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:null==s?void 0:s.path,issues:null==s?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c="schema"===e.kind,l=(null==s?void 0:s.message)??e.message??Lr(e.reference,u.lang)??(c?void u.lang:null)??r.message??void u.lang;l&&(u.message="function"==typeof l?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function Nr(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},Or())}}function Mr(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function Br(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}Symbol.toStringTag;var Vr=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Wr(e,t){return{kind:"validation",type:"check",reference:Wr,async:!1,expects:null,requirement:e,message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&Dr(this,"input",e,t),e}}}function Ur(e){return{kind:"transformation",type:"transform",reference:Ur,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function Fr(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function zr(e,t){return{kind:"schema",type:"array",reference:zr,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Nr(this)},"~run"(e,t){var n;const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let s=0;s<r.length;s++){const o=r[s],i=this.item["~run"]({value:o},t);if(i.issues){const a={type:"array",origin:"value",input:r,key:s,value:o};for(const t of i.issues)t.path?t.path.unshift(a):t.path=[a],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.push(i.value)}}else Dr(this,"type",e,t);return e}}}function Gr(e){return{kind:"schema",type:"date",reference:Gr,expects:"Date",async:!1,message:e,get"~standard"(){return Nr(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?Dr(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:Dr(this,"type",e,t),e}}}function Hr(e,t){return{kind:"schema",type:"instance",reference:Hr,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Nr(this)},"~run"(e,t){return e.value instanceof this.class?e.typed=!0:Dr(this,"type",e,t),e}}}function Jr(e,t){return{kind:"schema",type:"loose_object",reference:Jr,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Nr(this)},"~run"(e,t){var n;const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const s in this.entries){const o=this.entries[s];if(s in r||("exact_optional"===o.type||"optional"===o.type||"nullish"===o.type)&&void 0!==o.default){const i=s in r?r[s]:Fr(o),a=o["~run"]({value:i},t);if(a.issues){const o={type:"object",origin:"value",input:r,key:s,value:i};for(const t of a.issues)t.path?t.path.unshift(o):t.path=[o],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[s]=a.value}else if("exact_optional"!==o.type&&"optional"!==o.type&&"nullish"!==o.type&&(Dr(this,"key",e,t,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:r,key:s,value:r[s]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(const t in r)Mr(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else Dr(this,"type",e,t);return e}}}function Kr(e){return{kind:"schema",type:"number",reference:Kr,expects:"number",async:!1,message:e,get"~standard"(){return Nr(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?Dr(this,"type",e,t):e.typed=!0,e}}}function Zr(e,t){return{kind:"schema",type:"optional",reference:Zr,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Nr(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=Fr(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function Yr(e,t,n){return{kind:"schema",type:"record",reference:Yr,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return Nr(this)},"~run"(e,t){var n,r;const s=e.value;if(s&&"object"==typeof s){e.typed=!0,e.value={};for(const o in s)if(Mr(s,o)){const i=s[o],a=this.key["~run"]({value:o},t);if(a.issues){const r={type:"object",origin:"key",input:s,key:o,value:i};for(const t of a.issues)t.path=[r],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}const u=this.value["~run"]({value:i},t);if(u.issues){const n={type:"object",origin:"value",input:s,key:o,value:i};for(const t of u.issues)t.path?t.path.unshift(n):t.path=[n],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=u.issues),t.abortEarly){e.typed=!1;break}}(!a.typed||!u.typed)&&(e.typed=!1),a.typed&&(e.value[a.value]=u.value)}}else Dr(this,"type",e,t);return e}}}function Qr(e){return{kind:"schema",type:"string",reference:Qr,expects:"string",async:!1,message:e,get"~standard"(){return Nr(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:Dr(this,"type",e,t),e}}}function Xr(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function es(e,t){return{kind:"schema",type:"union",reference:es,expects:Br(e.map((e=>e.expects)),"|"),async:!1,options:e,message:t,get"~standard"(){return Nr(this)},"~run"(e,t){let n,r,s;for(const o of this.options){const i=o["~run"]({value:e.value},t);if(i.typed){if(!i.issues){n=i;break}r?r.push(i):r=[i]}else s?s.push(i):s=[i]}if(n)return n;if(r){if(1===r.length)return r[0];Dr(this,"type",e,t,{issues:Xr(r)}),e.typed=!0}else{if(1===(null==s?void 0:s.length))return s[0];Dr(this,"type",e,t,{issues:Xr(s)})}return e}}}function ts(e,t,n){const r=e["~run"]({value:t},Or(n));if(r.issues)throw new Vr(r.issues);return r.value}function ns(...e){return{...e[0],pipe:e,get"~standard"(){return Nr(this)},"~run"(t,n){for(const r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}const rs="web_app_invoke_custom_method",ss=bn("cloudStorage",rs),os=(Vt(rs),ss("deleteItem",((e,t)=>{const n=Array.isArray(e)?e:[e];return n.length?Nt("deleteStorageValues",{keys:n},t).then():Nn.resolve()}))),is=(ss("getItem",(function(e,t){const n=Array.isArray(e)?e:[e];return n.length?Nt("getStorageValues",{keys:n},t).then((e=>ts(Yr(ns(Qr(),Wr((e=>n.includes(e)))),Qr()),e))):Nn.resolve("string"==typeof e?"":{})})),ss("getKeys",(e=>Nt("getStorageKeys",{},e).then((e=>ts(zr(Qr()),e)))))),as=(ss("setItem",((e,t,n)=>Nt("saveStorageValue",{key:e,value:t},n).then())),ss("clear",(e=>is(e).then(os))),Symbol.toStringTag,"web_app_trigger_haptic_feedback"),us=bn("hapticFeedback",as),[cs,ls]=(Vt(as),us("impactOccurred",(e=>{Bt(as,{type:"impact",impact_style:e})})),us("notificationOccurred",(e=>{Bt(as,{type:"notification",notification_type:e})})),us("selectionChanged",(()=>{Bt(as,{type:"selection_change"})})),Symbol.toStringTag,Ct(void 0));function ps(e){return qt((()=>{const t=cs();return t?t[e]:void 0}))}ps("auth_date"),ps("can_send_after"),ps("chat"),ps("chat_type"),ps("chat_instance"),ps("hash"),ps("query_id");const[ds,fs]=Ct(),hs=(ps("receiver"),ps("start_param"),ps("user"),Symbol.toStringTag,"web_app_open_invoice"),ys=bn("invoice",hs),[bs,_s,gs]=(Vt(hs),Vn((function(e,t,n){let r;if("url"===t){const{hostname:t,pathname:n}=new URL(e,window.location.href);if("t.me"!==t)throw new Xt(`Link has unexpected hostname: ${t}`);const s=n.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!s)throw new Xt('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,r]=s}else r=e,n=t;return Mt(hs,"invoice_closed",{...n,params:{slug:r},capture:e=>r===e.slug}).then((e=>e.status))}),"Invoice is already opened")),[,vs,ms]=(ys("open",bs),_s),[,ws]=gs,ks=(Symbol.toStringTag,"locationManager"),xs="web_app_check_location",Es="web_app_open_location_settings",Ss=jt({available:!1,accessGranted:!1,accessRequested:!1});function As(e){return qt((()=>Ss()[e]))}Vt(xs),As("available"),As("accessGranted"),As("accessRequested");function $s(e){let t,n,r=!1;return e.available&&(r=!0,t=e.access_requested,n=e.access_granted),{available:r,accessGranted:n||!1,accessRequested:t||!1}}const[js,qs,Cs,Ps]=Wn(ks,(e=>{const t=kt()&&vt(ks);return t?Nn.resolve(t):Mt("web_app_check_location","location_checked",e).then($s)}),(e=>{Ss.set(e),gt(ks,e)})),Ts=bn(ks,xs),Is=yn(ks,Ps[0],xs),[,Os,Ls]=(Ts("mount",js),qs),[,Rs]=Cs,[Ds,Ns]=Ps,[Ms,Bs,Vs]=Vn((e=>Mt("web_app_request_location","location_requested",e).then((e=>{if(!e.available)throw Ss.set({...Ss(),available:!1}),new Ht("Location data tracking is not available");const{available:t,...n}=e;return n}))),"Location request is currently in progress"),[,Ws,Us]=(Is("requestLocation",Ms),Bs),[,Fs]=Vs;Ts("openSettings",(()=>{Bt(Es)}),Es);function zs(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=r)}return t}function Gs(e){return{lang:(null==e?void 0:e.lang)??void 0,message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??void 0,abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??void 0}}function Hs(e){var t,n;const r=typeof e;return"string"===r?`"${e}"`:"number"===r||"bigint"===r||"boolean"===r?`${e}`:"object"===r||"function"===r?(e&&(null==(n=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:n.name))??"null":r}function Js(e,t,n,r,s){const o=s&&"input"in s?s.input:n.value,i=(null==s?void 0:s.expected)??e.expects??null,a=(null==s?void 0:s.received)??Hs(o),u={kind:e.kind,type:e.type,input:o,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:null==s?void 0:s.path,issues:null==s?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c="schema"===e.kind,l=(null==s?void 0:s.message)??e.message??(e.reference,void u.lang)??(c?void u.lang:null)??r.message??void u.lang;l&&(u.message="function"==typeof l?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function Ks(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},Gs())}}function Zs(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function Ys(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}Symbol.toStringTag;var Qs=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Xs(e,t){return{kind:"validation",type:"check",reference:Xs,async:!1,expects:null,requirement:e,message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&Js(this,"input",e,t),e}}}function eo(e){return{kind:"validation",type:"integer",reference:eo,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&Js(this,"integer",e,t),e}}}function to(e){return{kind:"transformation",type:"transform",reference:to,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function no(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function ro(e){return{kind:"schema",type:"boolean",reference:ro,expects:"boolean",async:!1,message:e,get"~standard"(){return Ks(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:Js(this,"type",e,t),e}}}function so(e){return{kind:"schema",type:"date",reference:so,expects:"Date",async:!1,message:e,get"~standard"(){return Ks(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?Js(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:Js(this,"type",e,t),e}}}function oo(e,t){return{kind:"schema",type:"instance",reference:oo,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Ks(this)},"~run"(e,t){return e.value instanceof this.class?e.typed=!0:Js(this,"type",e,t),e}}}function io(e){return{kind:"schema",type:"lazy",reference:io,expects:"unknown",async:!1,getter:e,get"~standard"(){return Ks(this)},"~run"(e,t){return this.getter(e.value)["~run"](e,t)}}}function ao(e,t){return{kind:"schema",type:"loose_object",reference:ao,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Ks(this)},"~run"(e,t){var n;const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const s in this.entries){const o=this.entries[s];if(s in r||("exact_optional"===o.type||"optional"===o.type||"nullish"===o.type)&&void 0!==o.default){const i=s in r?r[s]:no(o),a=o["~run"]({value:i},t);if(a.issues){const o={type:"object",origin:"value",input:r,key:s,value:i};for(const t of a.issues)t.path?t.path.unshift(o):t.path=[o],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[s]=a.value}else if("exact_optional"!==o.type&&"optional"!==o.type&&"nullish"!==o.type&&(Js(this,"key",e,t,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:r,key:s,value:r[s]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(const t in r)Zs(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else Js(this,"type",e,t);return e}}}function uo(e){return{kind:"schema",type:"number",reference:uo,expects:"number",async:!1,message:e,get"~standard"(){return Ks(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?Js(this,"type",e,t):e.typed=!0,e}}}function co(e,t){return{kind:"schema",type:"optional",reference:co,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Ks(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=no(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function lo(e,t,n){return{kind:"schema",type:"record",reference:lo,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return Ks(this)},"~run"(e,t){var n,r;const s=e.value;if(s&&"object"==typeof s){e.typed=!0,e.value={};for(const o in s)if(Zs(s,o)){const i=s[o],a=this.key["~run"]({value:o},t);if(a.issues){const r={type:"object",origin:"key",input:s,key:o,value:i};for(const t of a.issues)t.path=[r],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}const u=this.value["~run"]({value:i},t);if(u.issues){const n={type:"object",origin:"value",input:s,key:o,value:i};for(const t of u.issues)t.path?t.path.unshift(n):t.path=[n],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=u.issues),t.abortEarly){e.typed=!1;break}}(!a.typed||!u.typed)&&(e.typed=!1),a.typed&&(e.value[a.value]=u.value)}}else Js(this,"type",e,t);return e}}}function po(e){return{kind:"schema",type:"string",reference:po,expects:"string",async:!1,message:e,get"~standard"(){return Ks(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:Js(this,"type",e,t),e}}}function fo(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function ho(e,t){return{kind:"schema",type:"union",reference:ho,expects:Ys(e.map((e=>e.expects)),"|"),async:!1,options:e,message:t,get"~standard"(){return Ks(this)},"~run"(e,t){let n,r,s;for(const o of this.options){const i=o["~run"]({value:e.value},t);if(i.typed){if(!i.issues){n=i;break}r?r.push(i):r=[i]}else s?s.push(i):s=[i]}if(n)return n;if(r){if(1===r.length)return r[0];Js(this,"type",e,t,{issues:fo(r)}),e.typed=!0}else{if(1===(null==s?void 0:s.length))return s[0];Js(this,"type",e,t,{issues:fo(s)})}return e}}}function yo(e,t,n){const r=e["~run"]({value:t},Gs(n));if(r.issues)throw new Qs(r.issues);return r.value}function bo(...e){return{...e[0],pipe:e,get"~standard"(){return Ks(this)},"~run"(t,n){for(const r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function _o(e){const t=function(e){return Object.entries(e).reduce(((e,[t,n])=>(e[function(e){return e.replace(/_[a-z]/g,(e=>e[1].toUpperCase()))}(t)]=n,e)),{})}(e);for(const e in t){const n=t[e];n&&"object"==typeof n&&!(n instanceof Date)&&(t[e]=Array.isArray(n)?n.map(_o):_o(n))}return t}function go(e){return to((t=>e?_o(t):t))}function vo(e){return t=>bo(e,go(t))}function mo(e){return(t,n)=>yo(bo(e,go(n)),t)}function wo(){return to(JSON.parse)}function ko(e){const t=vo(e);return e=>bo(po(),wo(),t(e))}function xo(e){return to((t=>{const n={};return new URLSearchParams(t).forEach(((e,t)=>{const r=n[t];Array.isArray(r)?r.push(e):n[t]=void 0===r?e:[r,e]})),yo(e,n)}))}function Eo(e){return t=>bo(ho([po(),oo(URLSearchParams)]),xo(e),go(t))}const So=co(io((()=>Co()))),Ao=ao({id:uo(),photo_url:co(po()),type:po(),title:po(),username:co(po())}),$o=ao({added_to_attachment_menu:co(ro()),allows_write_to_pm:co(ro()),first_name:po(),id:uo(),is_bot:co(ro()),is_premium:co(ro()),last_name:co(po()),language_code:co(po()),photo_url:co(po()),username:co(po())}),jo=ao({auth_date:bo(po(),to((e=>new Date(1e3*Number(e)))),so()),can_send_after:co(bo(po(),to(Number),eo())),chat:co(io((()=>qo()))),chat_type:co(po()),chat_instance:co(po()),hash:po(),query_id:co(po()),receiver:So,start_param:co(po()),signature:po(),user:So}),qo=ko(Ao),Co=ko($o),Po=Eo(jo);function To(e){return/^#[\da-f]{6}$/i.test(e)}const Io=vo(lo(po(),bo(ho([po(),uo()]),to((e=>"number"==typeof e?`#${(16777215&e).toString(16).padStart(6,"0")}`:e)),Xs(To)))),Oo=co(bo(po(),to((e=>"1"===e)))),Lo=ko(Io()),Ro=Eo(ao({tgWebAppBotInline:Oo,tgWebAppData:co(Po()),tgWebAppDefaultColors:co(Lo()),tgWebAppFullscreen:Oo,tgWebAppPlatform:po(),tgWebAppShowSettings:Oo,tgWebAppStartParam:co(po()),tgWebAppThemeParams:Lo(),tgWebAppVersion:po()}));mo(Po()),mo(Ro());const[Do,No]=Ct(!1),[Mo,Bo]=Ct({});function Vo(e){return qt((()=>Mo()[e]))}Vo("accent_text_color");const Wo=Vo("bg_color"),Uo=Vo("button_color"),Fo=Vo("button_text_color"),zo=Vo("bottom_bar_bg_color"),Go=(Vo("destructive_text_color"),Vo("header_bg_color"),Vo("hint_color"),Vo("link_color"),Vo("secondary_bg_color"));Vo("section_bg_color"),Vo("section_header_text_color"),Vo("section_separator_color"),Vo("subtitle_text_color"),Vo("text_color");function Ho(e){return qt((()=>Ko()[e]))}const Jo=jt({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),Ko=qt((()=>{const e=Jo();return{...e,backgroundColor:e.backgroundColor||Uo()||"#2481cc",textColor:e.textColor||Fo()||"#ffffff"}})),[Zo,Yo]=Ct(!1),Qo=(Ho("backgroundColor"),Ho("hasShineEffect"),Ho("isEnabled"),Ho("isLoaderVisible"),Ho("isVisible"),Ho("text"),Ho("textColor"),"main_button_pressed"),Xo="mainButton",ei=Sr(Xo),ti=Er(Xo,Yo);ei("mount",(()=>{if(!Zo()){const e=kt()&&vt(Xo);e&&Jo.set(e),Zo.set(!0)}})),ei("onClick",(e=>Ne(Qo,e))),ei("offClick",(e=>{Me(Qo,e)})),ti("setParams",(e=>{Jo.set({...Jo(),...zs(e)}),gt(Xo,Jo());const t=Ko();t.text&&Bt("web_app_setup_main_button",{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})}));function ni(e,t){document.documentElement.style.setProperty(e,t)}function ri(e){document.documentElement.style.removeProperty(e)}Symbol.toStringTag;const si="themeParams",oi=Sr(si),ii=({theme_params:e})=>{Mo.set(e),gt(si,e)},[ai,ui,ci,li]=Wn(si,(e=>{const t=kt()&&vt(si);return t?Nn.resolve(t):Mt("web_app_request_theme","theme_changed",e).then((e=>e.theme_params))}),(e=>{Ne("theme_changed",ii),Mo.set(e)})),pi=(Er(si,li[0])("bindCssVars",(e=>{if(Do())throw new zt;function t(e){Object.entries(Mo()).forEach((([t,n])=>{n&&e(t,n)}))}function n(){t(((t,n)=>{ni(e(t),n)}))}return e||(e=e=>`--tg-theme-${function(e){return e.replace(/_([a-z])/g,((e,t)=>`-${t.toLowerCase()}`))}(e)}`),n(),Mo.sub(n),Do.set(!0),()=>{t(ri),Mo.unsub(n),Do.set(!1)}})),oi("mount",ai)),[,di,fi]=ui,[,hi]=ci,[yi,bi]=li;function _i(e){return qt((()=>{const t=e();return To(t)?t:"bg_color"===t?Wo():Go()}))}const[gi,vi]=Ct("bg_color"),mi=_i(gi),[wi,ki]=Ct("bottom_bar_bg_color"),xi=qt((()=>{const e=wi();return To(e)?e:"bottom_bar_bg_color"===e?zo()||Go():"secondary_bg_color"===e?Go():Wo()})),[Ei,Si]=Ct("bg_color"),Ai=_i(Ei),[$i,ji]=Ct(!1),[qi,Ci]=Ct(!0),Pi=qt((()=>({backgroundColor:gi(),bottomBarColor:wi(),headerColor:Ei(),isActive:qi()}))),Ti="web_app_set_background_color",Ii="web_app_set_bottom_bar_color",Oi="web_app_set_header_color",Li="miniApp",Ri={any:[Ti,Ii,Oi]},Di=e=>{qi.set(e.is_visible),Zi()},[Ni,Mi,Bi,Vi]=Wn(Li,(e=>pi(e).then((()=>kt()&&vt(Li)||void 0))),(e=>{Yi.ifAvailable(e?e.backgroundColor:"bg_color"),Qi.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),Xi.ifAvailable(e?e.headerColor:"bg_color"),qi.set(!e||e.isActive),Ne("visibility_changed",Di)})),Wi=Sr(Li),Ui=bn(Li,Ri),Fi=yn(Li,Vi[0],Ri),[,zi,Gi]=(Fi("bindCssVars",(e=>{if($i())throw new zt;const[t,n]=mt();function r(e,n){function r(){ni(e,n()||null)}r(),t(n.sub(r),ri.bind(null,e))}return e||(e=e=>`--tg-${bt(e)}`),r(e("bgColor"),mi),r(e("bottomBarColor"),xi),r(e("headerColor"),Ai),t((()=>{$i.set(!1)})),$i.set(!0),n})),Wi("close",(e=>{Bt("web_app_close",{return_back:e})})),Ui("mount",Ni),Mi),[,Hi]=Bi,[Ji,Ki]=Vi;Wi("ready",(()=>{Bt("web_app_ready")}));function Zi(){gt(Li,Pi())}const Yi=Fi("setBackgroundColor",(e=>{e!==gi()&&(Bt(Ti,{color:e}),gi.set(e),Zi())}),Ti),Qi=Fi("setBottomBarColor",(e=>{e!==wi()&&(Bt(Ii,{color:e}),wi.set(e),Zi())}),Ii),Xi=Fi("setHeaderColor",(e=>{e!==Ei()&&(Bt(Oi,To(e)?{color:e}:{color_key:e}),Ei.set(e),Zi())}),Oi,{rgb:[Oi,"color",To]});function ea(e){const t=e.message.trim(),n=(e.title||"").trim(),r=e.buttons||[];if(n.length>64)throw new Xt(`Invalid title: ${n}`);if(!t||t.length>256)throw new Xt(`Invalid message: ${t}`);if(r.length>3)throw new Xt(`Invalid buttons count: ${r.length}`);return{title:n,message:t,buttons:r.length?r.map(((e,t)=>{const n=e.id||"";if(n.length>64)throw new Xt(`Button with index ${t} has invalid id: ${n}`);if(!e.type||"default"===e.type||"destructive"===e.type){const r=e.text.trim();if(!r||r.length>64)throw new Xt(`Button with index ${t} has invalid text: ${r}`);return{type:e.type,text:r,id:n}}return{type:e.type,id:n}})):[{type:"close",id:""}]}}Symbol.toStringTag;const ta="web_app_open_popup",na=bn("popup",ta),[ra,sa,oa]=(Vt(ta),Vn((e=>Mt(ta,"popup_closed",{...e,params:ea(e)}).then((({button_id:e})=>void 0===e?null:e))),"A popup is already opened")),[,ia,aa]=(na("open",ra),sa),[,ua]=oa,ca=(Symbol.toStringTag,"web_app_close_scan_qr_popup"),la="web_app_open_scan_qr_popup",pa=bn("qrScanner",la),[da,fa,ha]=(pa("close",(()=>{Bt(ca),function(e){const t=e();t&&t.catch(Hn).cancel()}(ya)})),Vt(la),Vn((function(e){e||(e={});const{onCaptured:t,text:n,capture:r}=e,[,s]=mt(Ne("scan_qr_popup_closed",(()=>{o.resolve()})),Ne("qr_text_received",(e=>{t?t(e.data):(!r||r(e.data))&&(o.resolve(e.data),Bt(ca))}))),o=new Bn(e);return(e.postEvent||Bt)(la,{text:n}),Nn.resolve(o).catch(Hn).finally(s)}),"The QR Scanner is already opened")),[,ya,ba]=(pa("open",da),fa),[,_a]=ha;function ga(e){return qt((()=>ma()[e]))}Symbol.toStringTag;const va=jt({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),ma=qt((()=>{const e=va();return{...e,backgroundColor:e.backgroundColor||xi()||"#000000",textColor:e.textColor||Uo()||"#2481cc"}})),[wa,ka]=Ct(!1),xa=(ga("backgroundColor"),ga("hasShineEffect"),ga("isEnabled"),ga("isLoaderVisible"),ga("isVisible"),ga("position"),ga("text"),ga("textColor"),"web_app_setup_secondary_button"),Ea="secondary_button_pressed",Sa="secondaryButton",Aa=bn(Sa,xa),$a=yn(Sa,ka,xa);Vt(xa),Aa("mount",(()=>{if(!wa()){const e=kt()&&vt(Sa);e&&va.set(e),wa.set(!0)}})),Aa("onClick",(e=>Ne(Ea,e))),Aa("offClick",(e=>{Me(Ea,e)})),$a("setParams",(e=>{va.set({...va(),...zs(e)}),gt(Sa,va());const t=ma();t.text&&Bt(xa,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})}));Symbol.toStringTag;const ja="web_app_setup_settings_button",qa="settings_button_pressed",Ca="settingsButton",[Pa,Ta]=Ct(!1),[Ia,Oa]=Ct(!1),La=(Vt(ja),bn(Ca,ja)),Ra=yn(Ca,Ia,ja);Ra("hide",(()=>{Da(!1)})),La("mount",(()=>{Ia()||(Da(kt()&&vt(Ca)||!1),Ia.set(!0))}));function Da(e){e!==Pa()&&(Bt(ja,{is_visible:e}),gt(Ca,e),Pa.set(e))}La("onClick",(e=>Ne(qa,e))),La("offClick",(e=>{Me(qa,e)})),Ra("show",(()=>{Da(!0)}));Symbol.toStringTag;const Na="web_app_setup_swipe_behavior",Ma="swipeBehavior",[Ba,Va]=Ct(!1),[Wa,Ua]=(Vt(Na),Ct(!0)),Fa=bn(Ma,Na),za=yn(Ma,Ba,Na);za("disableVertical",(()=>{Ga(!1)})),za("enableVertical",(()=>{Ga(!0)})),Fa("mount",(()=>{Ba()||(Ga(kt()&&vt(Ma)||!1,!0),Ba.set(!0))}));function Ga(e,t){(e!==Wa()||t)&&(Bt(Na,{allow_vertical_swipe:e}),gt(Ma,e),Wa.set(e))}Symbol.toStringTag,Symbol.toStringTag;const Ha="viewport",Ja="fullscreen_changed",Ka="safe_area_changed",Za="content_safe_area_changed",Ya="viewport_changed",Qa=Sr(Ha),Xa={left:0,top:0,bottom:0,right:0};function eu(e){return Math.max(e,0)}const[tu,nu]=Ct({contentSafeAreaInsets:Xa,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:Xa,stableHeight:0,width:0});function ru(e){return qt((()=>nu()[e]))}const su=ru("height"),ou=ru("stableHeight"),iu=ru("width");ru("isExpanded");function au(e){const{height:t,stableHeight:n,width:r}=e;tu.set({...tu(),...zs({...e,height:t?eu(t):void 0,width:r?eu(r):void 0,stableHeight:n?eu(n):void 0})}),gt(Ha,tu())}function uu(e){return qt((()=>cu()[e]))}const cu=ru("contentSafeAreaInsets"),lu=uu("bottom"),pu=uu("left"),du=uu("right"),fu=uu("top");function hu(e){return qt((()=>yu()[e]))}const yu=ru("safeAreaInsets"),bu=hu("bottom"),_u=hu("left"),gu=hu("right"),vu=hu("top"),mu="web_app_request_safe_area",wu=bn(Ha,mu),ku=wu("requestContentSafeAreaInsets",(e=>Mt("web_app_request_content_safe_area",Za,e))),xu=wu("requestSafeAreaInsets",(e=>Mt(mu,Ka,e))),Eu=e=>{const{height:t}=e;au({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},Su=e=>{au({isFullscreen:e.is_fullscreen})},Au=e=>{au({safeAreaInsets:e})},$u=e=>{au({contentSafeAreaInsets:e})},[ju,qu,Cu,Pu]=Wn(Ha,(e=>{const t=kt()&&vt(Ha);return t?Nn.resolve(t):Nn.fn((async e=>{const t=await Nn.all([xu.isAvailable()?xu(e):yu(),ku.isAvailable()?ku(e):cu()]),n=Rt(),r={contentSafeAreaInsets:t[1],isFullscreen:!!n.tgWebAppFullscreen,safeAreaInsets:t[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(n.tgWebAppPlatform)){const e=window;return{...r,height:e.innerHeight,isExpanded:!0,stableHeight:e.innerHeight,width:e.innerWidth}}return function(e){return Mt("web_app_request_viewport",Ya,e)}(e).then((e=>({...r,height:e.height,isExpanded:e.is_expanded,stableHeight:e.is_state_stable?e.height:0,width:e.width})))}),e)}),(e=>{Ne(Ya,Eu),Ne(Ja,Su),Ne(Ka,Au),Ne(Za,$u),au(e)})),[,Tu,Iu]=(Qa("mount",ju),qu),[,Ou]=Cu,[Lu,Ru]=Pu,Du=Er(Ha,Lu),[Nu,Mu]=Ct(!1),Bu=(Du("bindCssVars",(e=>{if(Nu())throw new zt;e||(e=e=>`--tg-viewport-${bt(e)}`);const t=[["height",su],["stableHeight",ou],["width",iu],["safeAreaInsetTop",vu],["safeAreaInsetBottom",bu],["safeAreaInsetLeft",_u],["safeAreaInsetRight",gu],["contentSafeAreaInsetTop",fu],["contentSafeAreaInsetBottom",lu],["contentSafeAreaInsetLeft",pu],["contentSafeAreaInsetRight",du]].reduce(((t,[n,r])=>{const s=e(n);if(s){const e=()=>{ni(s,`${r()}px`)};t.push([e,r.sub(e),s])}return t}),[]);return t.forEach((e=>{e[0]()})),Nu.set(!0),()=>{t.forEach((e=>{e[1](),ri(e[2])})),Nu.set(!1)}})),Qa("expand",(()=>{Bt("web_app_expand")})),"web_app_request_fullscreen"),Vu=yn(Ha,Lu,Bu),Wu=ru("isFullscreen"),[Uu,Fu]=Ct(),[zu,Gu]=Ct();function Hu(e,t){return Vu(e,Vn((e=>Mt(t?Bu:"web_app_exit_fullscreen",[Ja,"fullscreen_failed"],e).then((e=>{if("error"in e&&"ALREADY_FULLSCREEN"!==e.error)throw new un(e.error);const t=!("is_fullscreen"in e)||e.is_fullscreen;t!==Wu()&&au({isFullscreen:t})}))),"Fullscreen mode change is already being requested",{promise:Uu,error:zu})[0])}Hu("requestFullscreen",!0),Hu("exitFullscreen");const Ju=(Symbol.toStringTag,"web_app_request_emoji_status_access"),[Ku,Zu,Yu]=Vn((e=>Mt(Ju,"emoji_status_access_requested",e).then((e=>e.status))),"Emoji status access request is already in progress"),[,Qu,Xu]=Zu,[,ec]=Yu,[tc,nc,rc]=Vn(((e,t)=>Mt("web_app_set_emoji_status",["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then((e=>{if(e&&"error"in e)throw new rn(e.error)}))),"Emoji status set request is currently in progress"),[,sc,oc]=nc,[,ic]=rc,[ac,uc,cc]=Vn((e=>Mt("web_app_check_home_screen","home_screen_checked",e).then((e=>e.status||"unknown"))),"Check home screen status request is currently in progress"),[,lc,pc]=uc,[,dc]=cc,fc=(Sr()("openLink",((e,t)=>{if("string"==typeof e)try{e=new URL(e)}catch(t){throw new Xt(`"${e.toString()}" is invalid URL`,t)}t||(t={}),Bt("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})})),"web_app_open_tg_link"),hc=Sr()("openTelegramLink",(e=>{const t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new Xt(`"${t}" is invalid URL`);yt(fc,Dt())?(e=new URL(e),Bt(fc,{path_full:e.pathname+e.search})):window.location.href=t}));function yc(e,t){return new Nn({abortSignal:t,timeout:e}).catch((()=>{}))}Sr()("shareURL",((e,t)=>{hc("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))}));const bc="web_app_request_phone",[_c,gc,vc]=Vn((e=>Mt(bc,"phone_requested",e).then((e=>e.status))),"Phone access request is currently in progress"),mc=fn("requestPhoneAccess",_c,{isSupported:bc}),[,wc,kc]=gc,[,xc]=vc;async function Ec(e){const t=await Nt("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3});return ts(ns(es([Qr(),Hr(URLSearchParams)]),xo(Jr({contact:ns(Qr(),wo(),Jr({user_id:Kr(),phone_number:Qr(),first_name:Qr(),last_name:Zr(Qr())})),auth_date:ns(Qr(),Ur((e=>new Date(1e3*Number(e)))),Gr()),hash:Qr()}))),t)}const[Sc,Ac,$c]=Vn((e=>new Nn((async(e,t,n)=>{try{return e(await Ec(n))}catch(e){if(e instanceof Vr)throw e}if("sent"!==await mc(n))throw new on("User denied access");let r=50;for(;!n.isAborted();){try{return e(await Ec(n))}catch(e){if(e instanceof Vr)throw e}await yc(r),r+=50}}),e)),"Contact is already being requested"),[,jc,qc]=Ac,[,Cc]=$c,[Pc,Tc,Ic]=Vn((e=>Mt("web_app_request_write_access","write_access_requested",e).then((e=>e.status))),"Write access request is currently in progress"),[,Oc,Lc]=Tc,[,Rc]=Ic,{initDataRaw:Dc}=lt(),Nc=new class{constructor(e){this.initData=e}async setPixel(e,t,n){return fetch("http://localhost:3001/api/v1/set",{headers:{"Content-Type":"application/json",Authorization:`tma ${this.initData}`},method:"POST",body:JSON.stringify({x:e,y:t,color:n})})}async getState(){return fetch("http://localhost:3001/api/v1/state",{headers:{"Content-Type":"application/json",Authorization:`tma ${this.initData}`},method:"GET"})}}(Dc);Nc.getState().then((e=>{e.json().then((e=>{for(const t in e)for(const n in t)Vc.draw(t,n,e[t][n].color)}))}));const Mc=document.getElementById("nav"),Bc=document.getElementById("canvas");Bc.width=100,Bc.height=100,Bc.style.width="1000px",Bc.style.height="1000px";const Vc=new class{constructor(e,t){this.canvas=e,this.navPanel=t,this.ctx=e.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.rect=e.getBoundingClientRect()}draw(e,t,n){this.ctx.fillStyle=n,this.ctx.fillRect(e,t,1,1)}clickEvent(e){const t=Math.floor((e.clientX-this.rect.left)/10),n=Math.floor((e.clientY-this.rect.top)/10);Mc.innerHTML=`${Math.floor(t/10)}, ${Math.floor(n/10)}`,Nc.setPixel(t,n,"black").then((e=>console.log(e.json().then())))}moveEvent(e){let t=Math.floor(e.x-this.rect.left),n=Math.floor(e.y-this.rect.top);Mc.innerHTML=`${Math.floor(t/10)}, ${Math.floor(n/10)}`}}(Bc,Mc);Bc.addEventListener("click",Vc.clickEvent.bind(Vc)),Bc.addEventListener("mousemove",Vc.moveEvent.bind(Vc)),r.addEventListener("message",(function(e){const t=JSON.parse(e.data);Vc.draw(t.x,t.y,t.color)}))},575:(e,t,n)=>{n.p}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n(722),n(575)})();